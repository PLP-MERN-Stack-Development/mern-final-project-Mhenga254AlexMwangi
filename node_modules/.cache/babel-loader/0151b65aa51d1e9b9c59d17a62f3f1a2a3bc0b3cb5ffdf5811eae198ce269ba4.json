{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[recipes,setRecipes]=useState([]);const[search,setSearch]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{fetchRecipes();},[]);const fetchRecipes=async function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{const url=searchQuery?\"https://mern-final-project-mhenga254alexmwangi.onrender.com//api/recipes?search=\".concat(searchQuery):'https://mern-final-project-mhenga254alexmwangi.onrender.com//api/recipes';const response=await axios.get(url);setRecipes(response.data);}catch(error){console.error('Error fetching recipes:',error);}finally{setLoading(false);}};const handleSearch=e=>{e.preventDefault();fetchRecipes(search);};// Function to get the display image for a recipe\nconst getDisplayImage=recipe=>{// If recipe has a mainImage from backend, use it\nif(recipe.mainImage){return recipe.mainImage;}// If recipe has images array, use the first one\nif(recipe.images&&recipe.images.length>0){return recipe.images[0].url;}// If no images, return null for placeholder\nreturn null;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading recipes...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"home\",style:{minHeight:'100vh',background:\"linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(\".concat(process.env.PUBLIC_URL,\"/back.jpg)\"),backgroundSize:'cover',backgroundPosition:'center',backgroundAttachment:'fixed',position:'relative'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Discover Amazing Recipes\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Share your culinary creations with the world\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search recipes...\",value:search,onChange:e=>setSearch(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-btn\",children:\"Search\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"recipes-grid\",children:recipes.map(recipe=>{var _recipe$author;const displayImage=getDisplayImage(recipe);return/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-image\",children:[displayImage?/*#__PURE__*/_jsx(\"img\",{src:displayImage,alt:recipe.title,onError:e=>{// If image fails to load, show placeholder\ne.target.style.display='none';e.target.nextSibling.style.display='flex';}}):null,/*#__PURE__*/_jsx(\"div\",{className:\"recipe-placeholder \".concat(displayImage?'hidden':''),children:\"\\uD83C\\uDF73\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:recipe.title}),/*#__PURE__*/_jsx(\"p\",{className:\"recipe-description\",children:recipe.description.length>100?\"\".concat(recipe.description.substring(0,100),\"...\"):recipe.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u23F1\\uFE0F \",recipe.prepTime+recipe.cookTime,\" min\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDC65 \",recipe.servings,\" servings\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCA \",recipe.difficulty]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-author\",children:[\"By \",((_recipe$author=recipe.author)===null||_recipe$author===void 0?void 0:_recipe$author.name)||'Unknown']}),/*#__PURE__*/_jsx(Link,{to:\"/recipe/\".concat(recipe._id),className:\"view-recipe-btn\",children:\"View Recipe\"})]})]},recipe._id);})}),recipes.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-recipes\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No recipes found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Be the first to share a recipe!\"})]})]})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","Home","recipes","setRecipes","search","setSearch","loading","setLoading","fetchRecipes","searchQuery","arguments","length","undefined","url","concat","response","get","data","error","console","handleSearch","e","preventDefault","getDisplayImage","recipe","mainImage","images","className","children","style","minHeight","background","process","env","PUBLIC_URL","backgroundSize","backgroundPosition","backgroundAttachment","position","onSubmit","type","placeholder","value","onChange","target","map","_recipe$author","displayImage","src","alt","title","onError","display","nextSibling","description","substring","prepTime","cookTime","servings","difficulty","author","name","to","_id"],"sources":["/home/mhenga254/Downloads/b/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Home = () => {\n  const [recipes, setRecipes] = useState([]);\n  const [search, setSearch] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchRecipes();\n  }, []);\n\n  const fetchRecipes = async (searchQuery = '') => {\n    try {\n      const url = searchQuery \n        ? `https://mern-final-project-mhenga254alexmwangi.onrender.com//api/recipes?search=${searchQuery}`\n        : 'https://mern-final-project-mhenga254alexmwangi.onrender.com//api/recipes';\n      \n      const response = await axios.get(url);\n      setRecipes(response.data);\n    } catch (error) {\n      console.error('Error fetching recipes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    fetchRecipes(search);\n  };\n\n  // Function to get the display image for a recipe\n  const getDisplayImage = (recipe) => {\n    // If recipe has a mainImage from backend, use it\n    if (recipe.mainImage) {\n      return recipe.mainImage;\n    }\n    \n    // If recipe has images array, use the first one\n    if (recipe.images && recipe.images.length > 0) {\n      return recipe.images[0].url;\n    }\n    \n    // If no images, return null for placeholder\n    return null;\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading recipes...</div>;\n  }\n\n  return (\n    <div \n      className=\"home\"\n      style={{\n        minHeight: '100vh',\n        background: `linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(${process.env.PUBLIC_URL}/back.jpg)`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundAttachment: 'fixed',\n        position: 'relative'\n      }}\n    >\n      <div className=\"container\">\n        <div className=\"hero-section\">\n          <h1>Discover Amazing Recipes</h1>\n          <p>Share your culinary creations with the world</p>\n          \n          <form onSubmit={handleSearch} className=\"search-form\">\n            <input\n              type=\"text\"\n              placeholder=\"Search recipes...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              className=\"search-input\"\n            />\n            <button type=\"submit\" className=\"search-btn\">\n              Search\n            </button>\n          </form>\n        </div>\n\n        <div className=\"recipes-grid\">\n          {recipes.map(recipe => {\n            const displayImage = getDisplayImage(recipe);\n            \n            return (\n              <div key={recipe._id} className=\"recipe-card\">\n                <div className=\"recipe-image\">\n                  {displayImage ? (\n                    <img \n                      src={displayImage} \n                      alt={recipe.title}\n                      onError={(e) => {\n                        // If image fails to load, show placeholder\n                        e.target.style.display = 'none';\n                        e.target.nextSibling.style.display = 'flex';\n                      }}\n                    />\n                  ) : null}\n                  <div className={`recipe-placeholder ${displayImage ? 'hidden' : ''}`}>\n                    üç≥\n                  </div>\n                </div>\n                \n                <div className=\"recipe-content\">\n                  <h3>{recipe.title}</h3>\n                  <p className=\"recipe-description\">\n                    {recipe.description.length > 100 \n                      ? `${recipe.description.substring(0, 100)}...` \n                      : recipe.description}\n                  </p>\n                  \n                  <div className=\"recipe-meta\">\n                    <span>‚è±Ô∏è {recipe.prepTime + recipe.cookTime} min</span>\n                    <span>üë• {recipe.servings} servings</span>\n                    <span>üìä {recipe.difficulty}</span>\n                  </div>\n                  \n                  <div className=\"recipe-author\">\n                    By {recipe.author?.name || 'Unknown'}\n                  </div>\n                  \n                  <Link to={`/recipe/${recipe._id}`} className=\"view-recipe-btn\">\n                    View Recipe\n                  </Link>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {recipes.length === 0 && (\n          <div className=\"no-recipes\">\n            <h3>No recipes found</h3>\n            <p>Be the first to share a recipe!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}